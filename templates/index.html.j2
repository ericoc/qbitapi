{% extends "layout.html.j2" %}
{%- block title %}
    {%- if torrents is defined and torrents is iterable and torrents | length > 0 %}{{ torrents | length }}{% else %}0{% endif %} Torrents
{%- endblock title %}
{%- block header %}
    {%- if torrents is defined and torrents is iterable and torrents | length > 0 %}{{ torrents | length }}{% else %}0{% endif %} Torrents
{%- endblock header %}
{%- block scripts %}
    {%- if torrents is defined and torrents is iterable and torrents | length > 0 %}
        <script src="https://unpkg.com/gridjs/dist/gridjs.umd.js"></script>
        <script src="{{ url_for('static', filename='fmt.js') }}"></script>
        <script>
            // gridjs torrent table
            function showTorrents(where) {
                new gridjs.Grid({
                    columns: [
                        { id: 'state', name: 'State', formatter: cell => gridjs.html(fmtState(cell)) },
                        { id: 'name', name: 'Name', formatter: cell => gridjs.html(fmtName(cell)) },
                        { id: 'category', name: 'Category', formatter: cell => gridjs.html(fmtCategory(cell)) },
                        { id: 'ratio', name: 'Ratio', formatter: cell => gridjs.html(fmtRatio(cell)) },
                        { id: 'size', name: 'Size', formatter: cell => gridjs.html(fmtSize(cell)) },
                    <!--
                    /*
                        { id: 'uploaded', name: 'Uploaded', formatter: cell => gridjs.html(fmtSize(cell)) },
                        { id: 'downloaded', name: 'Downloaded', formatter: cell => gridjs.html(fmtSize(cell)) },
                    */
                    -->
                        { id: 'added_on', name: 'Added', formatter: cell => gridjs.html(fmtAdded(cell)) },
                    ], data: {{ torrents | tojson }}, search: true, sort: true, pagination: { limit: 50 }
                }).render(where);
            };
        </script>
    {%- endif %}
{%- endblock scripts %}
{%- block content %}
    {%- if torrents is defined and torrents is iterable and torrents | length > 0 %}
        <div id="torrent-table"></div>
        <script>showTorrents(document.getElementById('torrent-table'));</script>
    {%- else %}
        <h3>No Torrents Found</h3>
    {%- endif %}
{%- endblock content %}
